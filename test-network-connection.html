<!DOCTYPE html>
<html>
<head>
    <title>åœ°å€å¦‚ä½•è¿æ¥ç½‘ç»œ - æ·±åº¦è§£æ</title>
    <style>
        body {
            font-family: 'JetBrains Mono', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e6ed;
            line-height: 1.6;
        }
        .container {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .section {
            background: rgba(255, 255, 255, 0.03);
            padding: 25px;
            margin: 20px 0;
            border-radius: 12px;
            border-left: 4px solid #00d4aa;
        }
        .network-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            color: white;
        }
        .code {
            background: #0d1117;
            color: #c9d1d9;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid #30363d;
        }
        .highlight {
            background: #ffd700;
            color: #000;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }
        .address {
            background: #2ea043;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 14px;
            word-break: break-all;
        }
        button {
            background: linear-gradient(45deg, #00d4aa, #667eea);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 170, 0.4);
        }
        .step {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.3);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .warning {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .network-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ åœ°å€å¦‚ä½•è¿æ¥åˆ°å…·ä½“ç½‘ç»œ</h1>
        
        <div class="section">
            <h2>ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ</h2>
            <div class="step">
                <h4>1. åœ°å€çš„é€šç”¨æ€§</h4>
                <p>åŒä¸€ä¸ªç§é’¥åœ¨æ‰€æœ‰ EVM å…¼å®¹ç½‘ç»œä¸Šéƒ½ç”Ÿæˆç›¸åŒçš„åœ°å€</p>
                <div class="address">0x742d35Cc6065C0532C30c0C93c0f1C6F47c5c4F3</div>
                <p>â†‘ è¿™ä¸ªåœ°å€åœ¨ä»¥å¤ªåŠã€BSCã€Polygonã€Arbitrum ç­‰ç½‘ç»œä¸Šéƒ½ç›¸åŒ</p>
            </div>
            
            <div class="step">
                <h4>2. ç½‘ç»œé€šè¿‡ RPC åŒºåˆ†</h4>
                <p>è™½ç„¶åœ°å€ç›¸åŒï¼Œä½†é€šè¿‡è¿æ¥ä¸åŒçš„ RPC èŠ‚ç‚¹æ¥è®¿é—®ä¸åŒç½‘ç»œä¸Šçš„æ•°æ®</p>
            </div>
            
            <div class="step">
                <h4>3. ChainID é˜²æ­¢æ··æ·†</h4>
                <p>æ¯ä¸ªç½‘ç»œæœ‰å”¯ä¸€çš„ ChainIDï¼Œé˜²æ­¢äº¤æ˜“åœ¨é”™è¯¯ç½‘ç»œä¸Šæ‰§è¡Œ</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸŒ ç½‘ç»œé…ç½®ç¤ºä¾‹</h2>
            <div class="network-grid" id="networkGrid">
                <!-- ç½‘ç»œå¡ç‰‡å°†é€šè¿‡ JavaScript ç”Ÿæˆ -->
            </div>
        </div>

        <div class="section">
            <h2>ğŸ”§ è¿æ¥æµç¨‹æ¼”ç¤º</h2>
            <button onclick="demonstrateConnection()">ğŸš€ æ¼”ç¤ºåœ°å€è¿æ¥ç½‘ç»œ</button>
            <div id="connectionDemo"></div>
        </div>

        <div class="section">
            <h2>ğŸ’° ä½™é¢æŸ¥è¯¢æ¼”ç¤º</h2>
            <button onclick="checkBalancesAcrossNetworks()">ğŸ’ æŸ¥çœ‹åŒä¸€åœ°å€åœ¨ä¸åŒç½‘ç»œçš„ä½™é¢</button>
            <div id="balanceDemo"></div>
        </div>

        <div class="section">
            <h2>ğŸ“Š äº¤æ˜“ç­¾åæ¼”ç¤º</h2>
            <button onclick="demonstrateTransactionSigning()">âœï¸ æ¼”ç¤ºè·¨ç½‘ç»œäº¤æ˜“ç­¾å</button>
            <div id="transactionDemo"></div>
        </div>
    </div>

    <script>
        // ç½‘ç»œé…ç½®
        const networks = [
            {
                name: 'Ethereum Mainnet',
                rpcUrl: 'https://eth.llamarpc.com',
                chainId: 1,
                symbol: 'ETH',
                blockExplorer: 'https://etherscan.io',
                color: 'linear-gradient(135deg, #627eea 0%, #404bbf 100%)'
            },
            {
                name: 'Sepolia Testnet',
                rpcUrl: 'https://rpc.sepolia.org',
                chainId: 11155111,
                symbol: 'SEP',
                blockExplorer: 'https://sepolia.etherscan.io',
                color: 'linear-gradient(135deg, #ffa726 0%, #fb8c00 100%)'
            },
            {
                name: 'BSC Mainnet',
                rpcUrl: 'https://bsc-dataseed.binance.org',
                chainId: 56,
                symbol: 'BNB',
                blockExplorer: 'https://bscscan.com',
                color: 'linear-gradient(135deg, #f0b90b 0%, #d9940f 100%)'
            },
            {
                name: 'Polygon Mainnet',
                rpcUrl: 'https://polygon-rpc.com',
                chainId: 137,
                symbol: 'MATIC',
                blockExplorer: 'https://polygonscan.com',
                color: 'linear-gradient(135deg, #8247e5 0%, #6f42c1 100%)'
            }
        ];

        // ç¤ºä¾‹ç§é’¥å’Œåœ°å€
        const DEMO_PRIVATE_KEY = "0x4c0883a69102937d6231471b5dbb6204fe5129617082792ae468d01a3f362318";
        const DEMO_ADDRESS = "0x742d35Cc6065C0532C30c0C93c0f1C6F47c5c4F3";

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            console.log('ğŸŒ åœ°å€ç½‘ç»œè¿æ¥æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
            renderNetworkCards();
        };

        // æ¸²æŸ“ç½‘ç»œå¡ç‰‡
        function renderNetworkCards() {
            const grid = document.getElementById('networkGrid');
            
            networks.forEach(network => {
                const card = document.createElement('div');
                card.className = 'network-card';
                card.style.background = network.color;
                card.innerHTML = `
                    <h4>${network.name}</h4>
                    <div style="font-size: 12px; margin: 8px 0;">
                        <strong>ChainID:</strong> ${network.chainId}<br>
                        <strong>Symbol:</strong> ${network.symbol}<br>
                        <strong>RPC:</strong> ${network.rpcUrl}<br>
                        <strong>Explorer:</strong> <a href="${network.blockExplorer}" target="_blank" style="color: #fff;">æŸ¥çœ‹</a>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // æ¼”ç¤ºè¿æ¥æµç¨‹
        async function demonstrateConnection() {
            const demo = document.getElementById('connectionDemo');
            demo.innerHTML = '<h4>ğŸ”„ æ­£åœ¨æ¼”ç¤ºè¿æ¥æµç¨‹...</h4>';

            console.log('ğŸ”„ å¼€å§‹æ¼”ç¤ºåœ°å€è¿æ¥ç½‘ç»œçš„æµç¨‹...');

            let output = '';

            // ç¬¬1æ­¥ï¼šåŒä¸€ä¸ªç§é’¥ç”ŸæˆåŒä¸€ä¸ªåœ°å€
            output += `
                <div class="step">
                    <h4>ç¬¬1æ­¥ï¼šç§é’¥ç”Ÿæˆåœ°å€</h4>
                    <div class="code">
const privateKey = "${DEMO_PRIVATE_KEY}";
const wallet = new ethers.Wallet(privateKey);
console.log("åœ°å€:", wallet.address);
// ç»“æœ: ${DEMO_ADDRESS}
                    </div>
                    <p><span class="highlight">å…³é”®ç‚¹</span>: æ— è®ºè¿æ¥å“ªä¸ªç½‘ç»œï¼Œè¿™ä¸ªåœ°å€éƒ½ä¸å˜ï¼</p>
                </div>
            `;

            // ç¬¬2æ­¥ï¼šè¿æ¥ä¸åŒç½‘ç»œ
            output += `
                <div class="step">
                    <h4>ç¬¬2æ­¥ï¼šè¿æ¥åˆ°ä¸åŒç½‘ç»œ</h4>
            `;

            for (let network of networks) {
                try {
                    console.log(\`ğŸ”Œ è¿æ¥åˆ° \${network.name}...\`);
                    
                    const provider = new ethers.JsonRpcProvider(network.rpcUrl);
                    const connectedWallet = wallet.connect(provider);
                    
                    // è·å–ç½‘ç»œä¿¡æ¯
                    const networkInfo = await provider.getNetwork();
                    const blockNumber = await provider.getBlockNumber();
                    
                    output += \`
                        <div class="code">
// è¿æ¥åˆ° \${network.name}
const provider = new ethers.JsonRpcProvider("\${network.rpcUrl}");
const connectedWallet = wallet.connect(provider);

// ç½‘ç»œä¿¡æ¯
ChainID: \${networkInfo.chainId}
å½“å‰åŒºå—: \${blockNumber}
åœ°å€: \${connectedWallet.address}  // ğŸ” åœ°å€ä¿æŒä¸å˜ï¼
                        </div>
                    \`;
                    
                    console.log(\`âœ… \${network.name} è¿æ¥æˆåŠŸ\`);
                } catch (error) {
                    console.error(\`âŒ \${network.name} è¿æ¥å¤±è´¥:\`, error);
                    output += \`
                        <div class="code">
âŒ \${network.name} è¿æ¥å¤±è´¥: \${error.message}
                        </div>
                    \`;
                }
            }

            output += '</div>';

            // ç¬¬3æ­¥ï¼šè§£é‡Šæœºåˆ¶
            output += `
                <div class="step">
                    <h4>ç¬¬3æ­¥ï¼šç†è§£è¿æ¥æœºåˆ¶</h4>
                    <div class="warning">
                        <h5>ğŸ” æ ¸å¿ƒç†è§£ï¼š</h5>
                        <ul>
                            <li><strong>åœ°å€ä¸å˜</strong>: åŒä¸€ç§é’¥åœ¨æ‰€æœ‰ç½‘ç»œä¸Šåœ°å€ç›¸åŒ</li>
                            <li><strong>æ•°æ®æ¥æº</strong>: é€šè¿‡ä¸åŒRPCèŠ‚ç‚¹è·å–ä¸åŒç½‘ç»œçš„æ•°æ®</li>
                            <li><strong>ç½‘ç»œéš”ç¦»</strong>: æ¯ä¸ªç½‘ç»œæœ‰ç‹¬ç«‹çš„çŠ¶æ€å’Œä½™é¢</li>
                            <li><strong>äº¤æ˜“ç­¾å</strong>: ChainIDç¡®ä¿äº¤æ˜“åªåœ¨æŒ‡å®šç½‘ç»œæœ‰æ•ˆ</li>
                        </ul>
                    </div>
                </div>
            `;

            demo.innerHTML = output;
        }

        // æŸ¥çœ‹ä½™é¢æ¼”ç¤º
        async function checkBalancesAcrossNetworks() {
            const demo = document.getElementById('balanceDemo');
            demo.innerHTML = '<h4>ğŸ’° æ­£åœ¨æŸ¥è¯¢å„ç½‘ç»œä½™é¢...</h4>';

            console.log('ğŸ’° å¼€å§‹æŸ¥è¯¢åŒä¸€åœ°å€åœ¨ä¸åŒç½‘ç»œçš„ä½™é¢...');

            let output = \`
                <div class="step">
                    <h4>ğŸ’ åœ°å€: \${DEMO_ADDRESS}</h4>
                    <p>åŒä¸€ä¸ªåœ°å€åœ¨ä¸åŒç½‘ç»œä¸Šçš„ä½™é¢ï¼š</p>
                </div>
            \`;

            for (let network of networks) {
                try {
                    console.log(\`ğŸ’° æŸ¥è¯¢ \${network.name} ä½™é¢...\`);
                    
                    const provider = new ethers.JsonRpcProvider(network.rpcUrl);
                    const balance = await provider.getBalance(DEMO_ADDRESS);
                    const balanceInEther = ethers.formatEther(balance);
                    
                    output += \`
                        <div class="code">
\${network.name}:
  ä½™é¢: \${balanceInEther} \${network.symbol}
  åŸå§‹å€¼: \${balance.toString()} wei
  ChainID: \${network.chainId}
                        </div>
                    \`;
                    
                    console.log(\`âœ… \${network.name} ä½™é¢: \${balanceInEther} \${network.symbol}\`);
                } catch (error) {
                    console.error(\`âŒ \${network.name} æŸ¥è¯¢å¤±è´¥:\`, error);
                    output += \`
                        <div class="code">
âŒ \${network.name}: æŸ¥è¯¢å¤±è´¥ - \${error.message}
                        </div>
                    \`;
                }
            }

            output += \`
                <div class="warning">
                    <h5>ğŸ’¡ é‡è¦è§‚å¯Ÿï¼š</h5>
                    <ul>
                        <li>ç›¸åŒåœ°å€åœ¨ä¸åŒç½‘ç»œä¸Šä½™é¢å®Œå…¨ç‹¬ç«‹</li>
                        <li>åœ¨ä»¥å¤ªåŠæœ‰ä½™é¢ä¸ä»£è¡¨åœ¨BSCä¹Ÿæœ‰ä½™é¢</li>
                        <li>éœ€è¦åœ¨æ¯ä¸ªç½‘ç»œä¸Šå•ç‹¬è½¬å…¥èµ„é‡‘</li>
                    </ul>
                </div>
            \`;

            demo.innerHTML = output;
        }

        // äº¤æ˜“ç­¾åæ¼”ç¤º
        async function demonstrateTransactionSigning() {
            const demo = document.getElementById('transactionDemo');
            demo.innerHTML = '<h4>âœï¸ æ­£åœ¨æ¼”ç¤ºäº¤æ˜“ç­¾å...</h4>';

            console.log('âœï¸ å¼€å§‹æ¼”ç¤ºè·¨ç½‘ç»œäº¤æ˜“ç­¾å...');

            const wallet = new ethers.Wallet(DEMO_PRIVATE_KEY);

            let output = \`
                <div class="step">
                    <h4>ğŸ“ åˆ›å»ºäº¤æ˜“å¯¹è±¡</h4>
                    <div class="code">
// åŸºç¡€äº¤æ˜“å‚æ•°
const transaction = {
  to: "0x0000000000000000000000000000000000000000",
  value: ethers.parseEther("0.001"),
  gasLimit: 21000,
  gasPrice: ethers.parseUnits("20", "gwei")
};
                    </div>
                </div>
            \`;

            // ä¸ºä¸åŒç½‘ç»œç­¾åç›¸åŒäº¤æ˜“
            for (let network of networks.slice(0, 2)) { // åªæ¼”ç¤ºå‰ä¸¤ä¸ªç½‘ç»œ
                try {
                    const transaction = {
                        to: "0x0000000000000000000000000000000000000000",
                        value: ethers.parseEther("0.001"),
                        gasLimit: 21000,
                        gasPrice: ethers.parseUnits("20", "gwei"),
                        chainId: network.chainId  // å…³é”®ï¼šæŒ‡å®šç½‘ç»œ
                    };

                    const signedTx = await wallet.signTransaction(transaction);
                    
                    output += \`
                        <div class="step">
                            <h4>\${network.name} ç­¾å</h4>
                            <div class="code">
// \${network.name} (ChainID: \${network.chainId})
const transaction = {
  ...baseTransaction,
  chainId: \${network.chainId}  // ğŸ”‘ å…³é”®åŒºåˆ«
};

const signedTx = await wallet.signTransaction(transaction);
ç­¾åç»“æœ: \${signedTx.substring(0, 50)}...

// ğŸ” æ³¨æ„ï¼šç›¸åŒäº¤æ˜“åœ¨ä¸åŒç½‘ç»œä¸Šç­¾åç»“æœä¸åŒï¼
                            </div>
                        </div>
                    \`;
                    
                    console.log(\`âœ… \${network.name} ç­¾åå®Œæˆ\`);
                } catch (error) {
                    console.error(\`âŒ \${network.name} ç­¾åå¤±è´¥:\`, error);
                }
            }

            output += \`
                <div class="warning">
                    <h5>ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶ï¼š</h5>
                    <ul>
                        <li><strong>ChainID ä¿æŠ¤</strong>: é˜²æ­¢äº¤æ˜“åœ¨é”™è¯¯ç½‘ç»œä¸Šé‡æ”¾</li>
                        <li><strong>ç½‘ç»œéš”ç¦»</strong>: ä»¥å¤ªåŠç­¾åçš„äº¤æ˜“æ— æ³•åœ¨BSCä¸Šæ‰§è¡Œ</li>
                        <li><strong>ç­¾åå”¯ä¸€æ€§</strong>: ç›¸åŒäº¤æ˜“åœ¨ä¸åŒç½‘ç»œä¸Šç­¾åç»“æœä¸åŒ</li>
                    </ul>
                </div>
            \`;

            demo.innerHTML = output;
        }
    </script>
</body>
</html>
