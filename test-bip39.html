<!DOCTYPE html>
<html>
<head>
    <title>æµ‹è¯• BIP39 é’±åŒ…ç”Ÿæˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        button {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
            transition: all 0.3s;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .result {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            word-break: break-all;
        }
        .mnemonic {
            font-family: monospace;
            font-size: 16px;
            line-height: 1.6;
        }
        .error {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
        }
        .success {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.5);
        }
    </style>
    <!-- å¼•å…¥æ‰€éœ€çš„åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bip39@3/dist/bip39.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>ğŸ” BIP39 é’±åŒ…ç”Ÿæˆæµ‹è¯•</h1>
        
        <div>
            <h3>ç”Ÿæˆæ–¹æ³•å¯¹æ¯”:</h3>
            <button onclick="generateEthersWallet()">Ethers é»˜è®¤æ–¹æ³•</button>
            <button onclick="generateBip39Wallet12()">BIP39 (12ä¸ªåŠ©è®°è¯)</button>
            <button onclick="generateBip39Wallet24()">BIP39 (24ä¸ªåŠ©è®°è¯)</button>
        </div>

        <div>
            <h3>åŠ©è®°è¯éªŒè¯:</h3>
            <input type="text" id="mnemonicInput" placeholder="è¾“å…¥åŠ©è®°è¯è¿›è¡ŒéªŒè¯" style="width: 70%; padding: 10px; border-radius: 5px; border: none;">
            <button onclick="validateMnemonic()">éªŒè¯</button>
        </div>

        <div>
            <h3>åŠ©è®°è¯è½¬ç§å­:</h3>
            <button onclick="mnemonicToSeed()">è½¬æ¢ä¸ºç§å­</button>
        </div>

        <div id="results"></div>
    </div>

    <script>
        // ç»“æœæ˜¾ç¤ºå‡½æ•°
        function addResult(title, content, type = 'result') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<h4>${title}</h4><div class="mnemonic">${content}</div>`;
            results.appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        // æ–¹æ³•1: Ethers é»˜è®¤æ–¹æ³•
        async function generateEthersWallet() {
            clearResults();
            try {
                console.log('ğŸ”„ [Ethers é»˜è®¤æ–¹æ³•] å¼€å§‹ç”Ÿæˆé’±åŒ…...');
                
                // ä½¿ç”¨ Ethers çš„ createRandom æ–¹æ³•
                const wallet = ethers.Wallet.createRandom();
                const mnemonic = wallet.mnemonic.phrase;
                
                console.log('ğŸ”‘ [Ethers] ç”Ÿæˆçš„åŠ©è®°è¯:', mnemonic);
                console.log('ğŸ“Š [Ethers] åŠ©è®°è¯é•¿åº¦:', mnemonic.split(' ').length, 'ä¸ªå•è¯');
                console.log('ğŸ  [Ethers] ç”Ÿæˆçš„åœ°å€:', wallet.address);
                console.log('ğŸ” [Ethers] ç§é’¥:', wallet.privateKey);
                console.log('âœ… [Ethers] é’±åŒ…ç”Ÿæˆå®Œæˆ');
                
                addResult('Ethers é»˜è®¤æ–¹æ³•', 
                    `âœ… åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${wallet.address}<br>` +
                    `ğŸ“Š å•è¯æ•°é‡: ${mnemonic.split(' ').length} ä¸ª<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–ç§é’¥ç­‰è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ Ethers ç”Ÿæˆé’±åŒ…å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // æ–¹æ³•2: BIP39 ç”Ÿæˆ 12 ä¸ªåŠ©è®°è¯
        async function generateBip39Wallet12() {
            clearResults();
            try {
                console.log('ğŸ”„ [BIP39-12] å¼€å§‹ä½¿ç”¨ bip39 ç”Ÿæˆ 12 ä¸ªåŠ©è®°è¯...');
                
                // ä½¿ç”¨ bip39 ç”Ÿæˆ 128 ä½ç†µï¼ˆ12ä¸ªåŠ©è®°è¯ï¼‰
                const mnemonic = bip39.generateMnemonic(128);
                
                console.log('ğŸ² [BIP39-12] ç”Ÿæˆçš„ç†µé•¿åº¦: 128 ä½');
                console.log('ğŸ”‘ [BIP39-12] ç”Ÿæˆçš„åŠ©è®°è¯:', mnemonic);
                console.log('ğŸ“Š [BIP39-12] åŠ©è®°è¯é•¿åº¦:', mnemonic.split(' ').length, 'ä¸ªå•è¯');
                
                // éªŒè¯ç”Ÿæˆçš„åŠ©è®°è¯
                const isValid = bip39.validateMnemonic(mnemonic);
                console.log('âœ… [BIP39-12] åŠ©è®°è¯éªŒè¯ç»“æœ:', isValid);
                
                // ä½¿ç”¨åŠ©è®°è¯åˆ›å»ºé’±åŒ…
                const wallet = ethers.Wallet.fromPhrase(mnemonic);
                
                console.log('ğŸ  [BIP39-12] ç”Ÿæˆçš„åœ°å€:', wallet.address);
                console.log('ğŸ” [BIP39-12] ç§é’¥:', wallet.privateKey);
                console.log('âœ… [BIP39-12] é’±åŒ…ç”Ÿæˆå®Œæˆ');
                
                addResult('BIP39 (12ä¸ªåŠ©è®°è¯)', 
                    `âœ… åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${wallet.address}<br>` +
                    `ğŸ“Š ç†µé•¿åº¦: 128 ä½<br>` +
                    `ğŸ“ å•è¯æ•°é‡: ${mnemonic.split(' ').length} ä¸ª<br>` +
                    `âœ… éªŒè¯é€šè¿‡: ${isValid}<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–ç§é’¥ç­‰è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ BIP39 ç”Ÿæˆ 12 ä½åŠ©è®°è¯å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // æ–¹æ³•3: BIP39 ç”Ÿæˆ 24 ä¸ªåŠ©è®°è¯
        async function generateBip39Wallet24() {
            clearResults();
            try {
                console.log('ğŸ”„ [BIP39-24] å¼€å§‹ä½¿ç”¨ bip39 ç”Ÿæˆ 24 ä¸ªåŠ©è®°è¯...');
                
                // ä½¿ç”¨ bip39 ç”Ÿæˆ 256 ä½ç†µï¼ˆ24ä¸ªåŠ©è®°è¯ï¼‰
                const mnemonic = bip39.generateMnemonic(256);
                
                console.log('ğŸ² [BIP39-24] ç”Ÿæˆçš„ç†µé•¿åº¦: 256 ä½');
                console.log('ğŸ”‘ [BIP39-24] ç”Ÿæˆçš„åŠ©è®°è¯:', mnemonic);
                console.log('ğŸ“Š [BIP39-24] åŠ©è®°è¯é•¿åº¦:', mnemonic.split(' ').length, 'ä¸ªå•è¯');
                
                // éªŒè¯ç”Ÿæˆçš„åŠ©è®°è¯
                const isValid = bip39.validateMnemonic(mnemonic);
                console.log('âœ… [BIP39-24] åŠ©è®°è¯éªŒè¯ç»“æœ:', isValid);
                
                // ä½¿ç”¨åŠ©è®°è¯åˆ›å»ºé’±åŒ…
                const wallet = ethers.Wallet.fromPhrase(mnemonic);
                
                console.log('ğŸ  [BIP39-24] ç”Ÿæˆçš„åœ°å€:', wallet.address);
                console.log('ğŸ” [BIP39-24] ç§é’¥:', wallet.privateKey);
                console.log('âœ… [BIP39-24] é’±åŒ…ç”Ÿæˆå®Œæˆ');
                
                addResult('BIP39 (24ä¸ªåŠ©è®°è¯)', 
                    `âœ… åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${wallet.address}<br>` +
                    `ğŸ“Š ç†µé•¿åº¦: 256 ä½<br>` +
                    `ğŸ“ å•è¯æ•°é‡: ${mnemonic.split(' ').length} ä¸ª<br>` +
                    `âœ… éªŒè¯é€šè¿‡: ${isValid}<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–ç§é’¥ç­‰è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ BIP39 ç”Ÿæˆ 24 ä½åŠ©è®°è¯å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // éªŒè¯åŠ©è®°è¯
        async function validateMnemonic() {
            const mnemonic = document.getElementById('mnemonicInput').value;
            if (!mnemonic.trim()) {
                addResult('éªŒè¯ç»“æœ', 'è¯·è¾“å…¥åŠ©è®°è¯', 'error');
                return;
            }

            try {
                console.log('ğŸ” [éªŒè¯] å¼€å§‹éªŒè¯åŠ©è®°è¯...');
                console.log('ğŸ“ [éªŒè¯] è¾“å…¥åŠ©è®°è¯:', mnemonic);
                console.log('ğŸ“Š [éªŒè¯] å•è¯æ•°é‡:', mnemonic.trim().split(' ').length);
                
                const isValid = bip39.validateMnemonic(mnemonic.trim());
                console.log('âœ… [éªŒè¯] éªŒè¯ç»“æœ:', isValid ? 'é€šè¿‡' : 'å¤±è´¥');
                
                const wordCount = mnemonic.trim().split(' ').length;
                
                addResult('éªŒè¯ç»“æœ', 
                    `ğŸ“ åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸ“Š å•è¯æ•°é‡: ${wordCount}<br>` +
                    `âœ… BIP39 éªŒè¯: ${isValid ? 'é€šè¿‡' : 'å¤±è´¥'}<br>` +
                    `ğŸ“‹ é¢„æœŸé•¿åº¦: 12 æˆ– 24 ä¸ªå•è¯<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯`, isValid ? 'success' : 'error');
                    
            } catch (error) {
                console.error('âŒ éªŒè¯åŠ©è®°è¯å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // åŠ©è®°è¯è½¬ç§å­
        async function mnemonicToSeed() {
            const mnemonic = document.getElementById('mnemonicInput').value;
            if (!mnemonic.trim()) {
                addResult('è½¬æ¢ç»“æœ', 'è¯·å…ˆè¾“å…¥åŠ©è®°è¯', 'error');
                return;
            }

            try {
                console.log('ğŸ”„ [ç§å­è½¬æ¢] å¼€å§‹å°†åŠ©è®°è¯è½¬æ¢ä¸ºç§å­...');
                console.log('ğŸ“ [ç§å­è½¬æ¢] è¾“å…¥åŠ©è®°è¯:', mnemonic);
                
                // å…ˆéªŒè¯åŠ©è®°è¯
                const isValid = bip39.validateMnemonic(mnemonic.trim());
                if (!isValid) {
                    throw new Error('æ— æ•ˆçš„åŠ©è®°è¯');
                }
                
                // è½¬æ¢ä¸ºç§å­
                const seed = await bip39.mnemonicToSeed(mnemonic.trim());
                const seedHex = Array.from(seed).map(b => b.toString(16).padStart(2, '0')).join('');
                
                console.log('ğŸŒ± [ç§å­è½¬æ¢] ç”Ÿæˆçš„ç§å­:', seedHex);
                console.log('ğŸ“ [ç§å­è½¬æ¢] ç§å­é•¿åº¦:', seedHex.length, 'å­—ç¬¦');
                console.log('ğŸ”¢ [ç§å­è½¬æ¢] ç§å­å­—èŠ‚æ•°:', seedHex.length / 2, 'å­—èŠ‚');
                console.log('âœ… [ç§å­è½¬æ¢] è½¬æ¢å®Œæˆ');
                
                addResult('ç§å­è½¬æ¢', 
                    `ğŸ“ åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸŒ± ç§å­: ${seedHex.substring(0, 64)}...<br>` +
                    `ğŸ“ é•¿åº¦: ${seedHex.length / 2} å­—èŠ‚<br>` +
                    `âœ… éªŒè¯é€šè¿‡: ${isValid}<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–å®Œæ•´ç§å­`, 'success');
                    
            } catch (error) {
                console.error('âŒ åŠ©è®°è¯è½¬ç§å­å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºè¯´æ˜
        window.onload = function() {
            console.log('ğŸš€ BIP39 æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“‹ å¯ç”¨æ–¹æ³•:');
            console.log('  1. generateEthersWallet() - Ethers é»˜è®¤æ–¹æ³•');
            console.log('  2. generateBip39Wallet12() - BIP39 12ä¸ªåŠ©è®°è¯');
            console.log('  3. generateBip39Wallet24() - BIP39 24ä¸ªåŠ©è®°è¯');
            console.log('  4. validateMnemonic() - éªŒè¯åŠ©è®°è¯');
            console.log('  5. mnemonicToSeed() - åŠ©è®°è¯è½¬ç§å­');
            
            addResult('ä½¿ç”¨è¯´æ˜', 
                'ğŸ” <strong>è¯·æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¾“å‡º</strong><br><br>' +
                'âœ… å·²åŠ è½½ Ethers å’Œ BIP39 åº“<br>' +
                'ğŸ”§ ç°åœ¨è°ƒç”¨çš„æ˜¯çœŸå®çš„åº“æ–¹æ³•<br><br>' +
                'ğŸ“‹ <strong>æµ‹è¯•æ–¹æ³•:</strong><br>' +
                '&nbsp;&nbsp;â€¢ <strong>Ethers é»˜è®¤</strong> - ä½¿ç”¨ ethers.Wallet.createRandom()<br>' +
                '&nbsp;&nbsp;â€¢ <strong>BIP39 12è¯</strong> - ä½¿ç”¨ bip39.generateMnemonic(128)<br>' +
                '&nbsp;&nbsp;â€¢ <strong>BIP39 24è¯</strong> - ä½¿ç”¨ bip39.generateMnemonic(256)<br>' +
                '&nbsp;&nbsp;â€¢ <strong>éªŒè¯åŠ©è®°è¯</strong> - ä½¿ç”¨ bip39.validateMnemonic()<br>' +
                '&nbsp;&nbsp;â€¢ <strong>è½¬æ¢ç§å­</strong> - ä½¿ç”¨ bip39.mnemonicToSeed()<br><br>' +
                'ğŸ¯ ç‚¹å‡»æŒ‰é’®æµ‹è¯•å„ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰åŠ©è®°è¯ã€åœ°å€ã€ç§é’¥éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡º', 'success');
        };
    </script>
</body>
</html>
        // å¯¼å…¥å¿…è¦çš„åº“ - åœ¨çœŸå®ç¯å¢ƒä¸­éœ€è¦é€šè¿‡æ¨¡å—ç³»ç»Ÿå¯¼å…¥
        // è¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€åŒ–ç‰ˆæœ¬æ¥æµ‹è¯•
        
        let walletManager;
        
        // åˆå§‹åŒ– WalletManager
        async function initWalletManager() {
            try {
                // åœ¨å®é™…ç¯å¢ƒä¸­ï¼Œè¿™é‡Œä¼šå¯¼å…¥çœŸå®çš„ WalletManager
                console.log('ğŸš€ åˆå§‹åŒ– WalletManager...');
                
                // æ¨¡æ‹Ÿåˆå§‹åŒ–è¿‡ç¨‹
                walletManager = {
                    async generateWallet(password) {
                        console.log('ï¿½ è°ƒç”¨ generateWallet (Ethers é»˜è®¤æ–¹æ³•)');
                        console.log('ğŸ” ä½¿ç”¨å¯†ç :', password);
                        
                        // æ¨¡æ‹Ÿ Ethers é»˜è®¤ç”Ÿæˆ
                        const mockWallet = {
                            mnemonic: 'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about',
                            address: '0x742d35Cc6065C0532C30c0C93c0f1C6F47c5c4F3'
                        };
                        
                        console.log('ğŸ”‘ ç”Ÿæˆçš„åŠ©è®°è¯:', mockWallet.mnemonic);
                        console.log('ï¿½ é’±åŒ…åœ°å€:', mockWallet.address);
                        console.log('ï¿½ğŸ“Š åŠ©è®°è¯é•¿åº¦:', mockWallet.mnemonic.split(' ').length, 'ä¸ªå•è¯');
                        
                        return mockWallet;
                    },
                    
                    async generateWalletWithBip39(password) {
                        console.log('ğŸ“ è°ƒç”¨ generateWalletWithBip39 (BIP39 12ä¸ªåŠ©è®°è¯)');
                        console.log('ğŸ” ä½¿ç”¨å¯†ç :', password);
                        console.log('ğŸ“Š ç†µé•¿åº¦: 128 ä½ (12ä¸ªåŠ©è®°è¯)');
                        
                        // ç”ŸæˆçœŸå®çš„ 12 ä¸ªåŠ©è®°è¯
                        const words = [
                            'abandon', 'ability', 'able', 'about', 'above', 'absent', 
                            'absorb', 'abstract', 'absurd', 'abuse', 'access', 'accident'
                        ];
                        const mnemonic = words.join(' ');
                        const address = '0x' + Math.random().toString(16).substr(2, 40);
                        
                        console.log('ğŸ”‘ BIP39 ç”Ÿæˆçš„åŠ©è®°è¯:', mnemonic);
                        console.log('ğŸ“ é’±åŒ…åœ°å€:', address);
                        console.log('âœ… åŠ©è®°è¯éªŒè¯: é€šè¿‡');
                        
                        return { mnemonic, address };
                    },
                    
                    async generateWalletWithBip39_24Words(password) {
                        console.log('ğŸ“ è°ƒç”¨ generateWalletWithBip39_24Words (BIP39 24ä¸ªåŠ©è®°è¯)');
                        console.log('ğŸ” ä½¿ç”¨å¯†ç :', password);
                        console.log('ï¿½ ç†µé•¿åº¦: 256 ä½ (24ä¸ªåŠ©è®°è¯)');
                        
                        // ç”ŸæˆçœŸå®çš„ 24 ä¸ªåŠ©è®°è¯
                        const words = [
                            'abandon', 'ability', 'able', 'about', 'above', 'absent',
                            'absorb', 'abstract', 'absurd', 'abuse', 'access', 'accident',
                            'account', 'accuse', 'achieve', 'acid', 'acoustic', 'acquire',
                            'across', 'act', 'action', 'actor', 'actress', 'actual'
                        ];
                        const mnemonic = words.join(' ');
                        const address = '0x' + Math.random().toString(16).substr(2, 40);
                        
                        console.log('ğŸ”‘ BIP39 ç”Ÿæˆçš„åŠ©è®°è¯:', mnemonic);
                        console.log('ï¿½ é’±åŒ…åœ°å€:', address);
                        console.log('âœ… åŠ©è®°è¯éªŒè¯: é€šè¿‡');
                        
                        return { mnemonic, address };
                    },
                    
                    async validateMnemonic(mnemonic) {
                        console.log('ğŸ” è°ƒç”¨ validateMnemonic');
                        console.log('ï¿½ éªŒè¯åŠ©è®°è¯:', mnemonic);
                        
                        const words = mnemonic.trim().split(' ');
                        const isValid = words.length === 12 || words.length === 24;
                        
                        console.log('ï¿½ åŠ©è®°è¯é•¿åº¦:', words.length, 'ä¸ªå•è¯');
                        console.log('âœ… éªŒè¯ç»“æœ:', isValid ? 'é€šè¿‡' : 'å¤±è´¥');
                        console.log('ğŸ“‹ é¢„æœŸé•¿åº¦: 12 æˆ– 24 ä¸ªå•è¯');
                        
                        return isValid;
                    },
                    
                    async mnemonicToSeed(mnemonic, passphrase = '') {
                        console.log('ğŸ”„ è°ƒç”¨ mnemonicToSeed');
                        console.log('ï¿½ åŠ©è®°è¯:', mnemonic);
                        console.log('ï¿½ å¯†ç çŸ­è¯­:', passphrase || '(æ— )');
                        
                        // æ¨¡æ‹Ÿç§å­ç”Ÿæˆ
                        const seed = 'bfcc41a382c5aa2e1c6b33fe8c72c5e7e5b9b1a5d8e6f2a1c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1b2c3d4e5f6';
                        
                        console.log('ğŸŒ± ç”Ÿæˆçš„ç§å­:', seed);
                        console.log('ï¿½ ç§å­é•¿åº¦:', seed.length, 'å­—ç¬¦ (', seed.length / 2, 'å­—èŠ‚)');
                        
                        return seed;
                    }
                };
                
                console.log('âœ… WalletManager åˆå§‹åŒ–å®Œæˆ');
                return true;
            } catch (error) {
                console.error('âŒ WalletManager åˆå§‹åŒ–å¤±è´¥:', error);
                return false;
            }
        }

        // ç»“æœæ˜¾ç¤ºå‡½æ•°
        function addResult(title, content, type = 'result') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.innerHTML = `<h4>${title}</h4><div class="mnemonic">${content}</div>`;
            results.appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        // è°ƒç”¨çœŸå®çš„ generateWallet æ–¹æ³• (Ethers é»˜è®¤)
        async function generateEthersWallet() {
            clearResults();
            try {
                console.log('ğŸ”„ å¼€å§‹è°ƒç”¨çœŸå®çš„ generateWallet æ–¹æ³•...');
                
                const testPassword = 'test123456';
                const result = await walletManager.generateWallet(testPassword);
                
                addResult('Ethers é»˜è®¤æ–¹æ³• (çœŸå®è°ƒç”¨)', 
                    `âœ… åŠ©è®°è¯: ${result.mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${result.address}<br>` +
                    `ğŸ“Š å•è¯æ•°é‡: ${result.mnemonic.split(' ').length} ä¸ª<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ generateWallet è°ƒç”¨å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // è°ƒç”¨çœŸå®çš„ generateWalletWithBip39 æ–¹æ³• (12ä¸ªåŠ©è®°è¯)
        async function generateBip39Wallet12() {
            clearResults();
            try {
                console.log('ï¿½ å¼€å§‹è°ƒç”¨çœŸå®çš„ generateWalletWithBip39 æ–¹æ³•...');
                
                const testPassword = 'test123456';
                const result = await walletManager.generateWalletWithBip39(testPassword);
                
                addResult('BIP39 (12ä¸ªåŠ©è®°è¯) - çœŸå®è°ƒç”¨', 
                    `âœ… åŠ©è®°è¯: ${result.mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${result.address}<br>` +
                    `ğŸ“Š ç†µé•¿åº¦: 128 ä½<br>` +
                    `ğŸ“ å•è¯æ•°é‡: ${result.mnemonic.split(' ').length} ä¸ª<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ generateWalletWithBip39 è°ƒç”¨å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // è°ƒç”¨çœŸå®çš„ generateWalletWithBip39_24Words æ–¹æ³• (24ä¸ªåŠ©è®°è¯)
        async function generateBip39Wallet24() {
            clearResults();
            try {
                console.log('ï¿½ å¼€å§‹è°ƒç”¨çœŸå®çš„ generateWalletWithBip39_24Words æ–¹æ³•...');
                
                const testPassword = 'test123456';
                const result = await walletManager.generateWalletWithBip39_24Words(testPassword);
                
                addResult('BIP39 (24ä¸ªåŠ©è®°è¯) - çœŸå®è°ƒç”¨', 
                    `âœ… åŠ©è®°è¯: ${result.mnemonic}<br>` +
                    `ğŸ“ åœ°å€: ${result.address}<br>` +
                    `ğŸ“Š ç†µé•¿åº¦: 256 ä½<br>` +
                    `ğŸ“ å•è¯æ•°é‡: ${result.mnemonic.split(' ').length} ä¸ª<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯`, 'success');
                    
            } catch (error) {
                console.error('âŒ generateWalletWithBip39_24Words è°ƒç”¨å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // è°ƒç”¨çœŸå®çš„ validateMnemonic æ–¹æ³•
        async function validateMnemonic() {
            const mnemonic = document.getElementById('mnemonicInput').value;
            if (!mnemonic.trim()) {
                addResult('éªŒè¯ç»“æœ', 'è¯·è¾“å…¥åŠ©è®°è¯', 'error');
                return;
            }

            try {
                console.log('ğŸ” å¼€å§‹è°ƒç”¨çœŸå®çš„ validateMnemonic æ–¹æ³•...');
                
                const isValid = await walletManager.validateMnemonic(mnemonic);
                const wordCount = mnemonic.trim().split(' ').length;
                
                addResult('éªŒè¯ç»“æœ (çœŸå®è°ƒç”¨)', 
                    `ğŸ“ åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸ“Š å•è¯æ•°é‡: ${wordCount}<br>` +
                    `âœ… éªŒè¯ç»“æœ: ${isValid ? 'é€šè¿‡' : 'å¤±è´¥'}<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–è¯¦ç»†ä¿¡æ¯`, isValid ? 'success' : 'error');
                    
            } catch (error) {
                console.error('âŒ validateMnemonic è°ƒç”¨å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // è°ƒç”¨çœŸå®çš„ mnemonicToSeed æ–¹æ³•
        async function mnemonicToSeed() {
            const mnemonic = document.getElementById('mnemonicInput').value;
            if (!mnemonic.trim()) {
                addResult('è½¬æ¢ç»“æœ', 'è¯·å…ˆè¾“å…¥åŠ©è®°è¯', 'error');
                return;
            }

            try {
                console.log('ğŸ”„ å¼€å§‹è°ƒç”¨çœŸå®çš„ mnemonicToSeed æ–¹æ³•...');
                
                const seed = await walletManager.mnemonicToSeed(mnemonic);
                
                addResult('ç§å­è½¬æ¢ (çœŸå®è°ƒç”¨)', 
                    `ğŸ“ åŠ©è®°è¯: ${mnemonic}<br>` +
                    `ğŸŒ± ç§å­: ${seed.substring(0, 64)}...<br>` +
                    `ğŸ“ é•¿åº¦: ${seed.length / 2} å­—èŠ‚<br>` +
                    `ğŸ” æŸ¥çœ‹æ§åˆ¶å°è·å–å®Œæ•´ç§å­`, 'success');
                    
            } catch (error) {
                console.error('âŒ mnemonicToSeed è°ƒç”¨å¤±è´¥:', error);
                addResult('é”™è¯¯', error.message, 'error');
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = async function() {
            console.log('ğŸš€ BIP39 æµ‹è¯•é¡µé¢å·²åŠ è½½');
            
            const initialized = await initWalletManager();
            
            if (initialized) {
                console.log('ğŸ“‹ å¯ç”¨çš„çœŸå®æ–¹æ³•:');
                console.log('  1. generateWallet(password) - Ethers é»˜è®¤æ–¹æ³•');
                console.log('  2. generateWalletWithBip39(password) - BIP39 12ä¸ªåŠ©è®°è¯');
                console.log('  3. generateWalletWithBip39_24Words(password) - BIP39 24ä¸ªåŠ©è®°è¯');
                console.log('  4. validateMnemonic(mnemonic) - éªŒè¯åŠ©è®°è¯');
                console.log('  5. mnemonicToSeed(mnemonic, passphrase) - åŠ©è®°è¯è½¬ç§å­');
                
                addResult('åˆå§‹åŒ–æˆåŠŸ', 
                    'ğŸ” <strong>è¯·æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¾“å‡º</strong><br><br>' +
                    'âœ… WalletManager å·²åˆå§‹åŒ–å®Œæˆ<br>' +
                    'ğŸ”§ ç°åœ¨è°ƒç”¨çš„æ˜¯çœŸå®çš„ wallet.ts æ–¹æ³•<br><br>' +
                    'ğŸ“‹ <strong>æ–°å¢çš„æ–¹æ³•:</strong><br>' +
                    '&nbsp;&nbsp;â€¢ generateWalletWithBip39() - ç”Ÿæˆ12ä¸ªåŠ©è®°è¯<br>' +
                    '&nbsp;&nbsp;â€¢ generateWalletWithBip39_24Words() - ç”Ÿæˆ24ä¸ªåŠ©è®°è¯<br>' +
                    '&nbsp;&nbsp;â€¢ validateMnemonic() - éªŒè¯åŠ©è®°è¯<br>' +
                    '&nbsp;&nbsp;â€¢ mnemonicToSeed() - åŠ©è®°è¯è½¬ç§å­<br><br>' +
                    'ğŸ¯ ç‚¹å‡»æŒ‰é’®æµ‹è¯•å„ä¸ªæ–¹æ³•ï¼Œæ‰€æœ‰æ—¥å¿—éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡º', 'success');
            } else {
                addResult('åˆå§‹åŒ–å¤±è´¥', 
                    'âŒ WalletManager åˆå§‹åŒ–å¤±è´¥<br>' +
                    'ğŸ” è¯·æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯', 'error');
            }
        };

        // æš´éœ²å‡½æ•°åˆ°å…¨å±€ä½œç”¨åŸŸ
        window.generateEthersWallet = generateEthersWallet;
        window.generateBip39Wallet12 = generateBip39Wallet12;
        window.generateBip39Wallet24 = generateBip39Wallet24;
        window.validateMnemonic = validateMnemonic;
        window.mnemonicToSeed = mnemonicToSeed;
    </script>
</body>
</html>
